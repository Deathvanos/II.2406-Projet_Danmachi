Index: Projet_Danmachi/target/classes/templates/index.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE HTML>\r\n<html xmlns:th=\"http://www.thymeleaf.org\">\r\n\t<head>\r\n\t\t<meta charset=\"utf-8\">\r\n\t\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE-edge\">\r\n\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\t\t<link th:rel=\"stylesheet\" th:href=\"@{/webjars/bootstrap/4.6.2/css/bootstrap.min.css}\"/>\r\n\t\t<link rel=\"stylesheet\" href=\"/css/common.css\"/>\r\n\t</head>\r\n\t<body>\r\n\r\n\t\t<header th:insert=\"~{common/header :: header}\"></header>\r\n\r\n\r\n\t\t<div class=\"masthead\" style=\"background-image: url(/images/background_header3.jpg)\">\r\n\t\t\t<div class=\"container h-100\">\r\n\t\t\t\t<div class=\"row h-100 align-items-center\">\r\n\t\t\t\t\t<div class=\"col-12 text-center\">\r\n\t\t\t\t\t\t<h1 class=\"display-2 fw-light\">Acceuil</h1>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\r\n\t\t<div class=\"container-fluid\">\r\n\t\t\t<div class=\"row bodySize\">\r\n\t\t\t\t<div class=\"col-sm-2 borderImage\" style=\"background-image: url(/images/border1.jpg)\"></div>\r\n\r\n\t\t\t\t<div class=\"col-sm-8\" style=\"background-color:#D5E4D9;\">\r\n\t\t\t\t\t<h1 class=\"display-5\">Présentation du jeu Danmachi RP</h1>\r\n\t\t\t\t\t<p class=\"text-justify\">\r\n\t\t\t\t\t\tDanmachiRP.fr est un jeu en ligne gratuit dans lequel le joueur incarne un héro afin d’aider sa guilde à prosperer.\r\n\t\t\t\t\t\tL'objectif premier est de devenir le meilleur Hero. Pour cela divers moyens existent comme améliorer ses caractéristiques, acheter les meilleurs équipements, atteindre les plus hait sommets du donjon, ...\r\n\t\t\t\t\t\tMais le joueur peut choisir d'autres objectifs selon ses envies : son objectif peut être de collectionner le plus d’items rare possible, de devenir le plus riche héro ou être le meilleur chasseur de monstres du pays.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<h1 class=\"display-6\">Aperçu du jeu Danmachi RP</h1>\r\n\r\n\t\t\t\t\t<div class=\"container p-3\">\r\n\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t<div class=\"col\">\r\n\t\t\t\t\t\t\t\t<img th:src=\"@{/images/1.png}\" width=\"100%\" alt=\"\">\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"col\">\r\n\t\t\t\t\t\t\t\t<p class=\"text-justify\">\r\n\t\t\t\t\t\t\t\t\tLes Dieux et Déesses ont commencé à descendre dans le monde inférieur depuis le Ciel il y a 1 an.\r\n\t\t\t\t\t\t\t\t\tLes Dieux ont donné la falna aux aventuriers pour faire naître des héros.\r\n\t\t\t\t\t\t\t\t\tFalna est la grâce, parfois appelée bénédiction, donnée par les dieux et les déesses aux membres de leur familia.\r\n\t\t\t\t\t\t\t\t\tCeux qui ont une falna acquièrent des prouesses physiques surhumaines lorsqu'ils en sont dotés et peuvent rassembler des excelia pour élever leur statut et devenir encore plus forts.\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"w-100\"></div>\r\n\t\t\t\t\t\t\t<div class=\"col\">\r\n\t\t\t\t\t\t\t\t<p class=\"text-justify\">\r\n\t\t\t\t\t\t\t\t\tChaque jours, des familias apparaisent et forment de nouvelles recrues. Réalisez des missions pour votre familias, partez explorer le donjon, vendez vos tresors afin d'achetez de nouveaux équipements pour être le meilleur !\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"col\">\r\n\t\t\t\t\t\t\t\t<img th:src=\"@{/images/2.png}\" width=\"100%\" alt=\"\">\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"w-100\"></div>\r\n\t\t\t\t\t\t\t<div class=\"col\">\r\n\t\t\t\t\t\t\t\t<img th:src=\"@{/images/3.png}\" width=\"100%\" alt=\"\">\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"col\">\r\n\t\t\t\t\t\t\t\t<p class=\"text-justify\">\r\n\t\t\t\t\t\t\t\t\tDu combat au corps à corps aux techniques Ninpo, de l'acquisition de l'arme la plus puissante à celle de l'armure la plus résistante.\r\n\t\t\t\t\t\t\t\t\tMême si tous les moyens sont bons pour vaincre ses ennemis, chaque aventuriers suit une voie qui lui est propre.\r\n\t\t\t\t\t\t\t\t\tAllez-vous être prêt pour le combat final ?\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<h1 class=\"display-6\">Participez à l'aventure !</h1>\r\n\t\t\t\t\t<a href=\"/subscription\">Inscrivez-vous maintenant sur DanmachiRP.fr.</a>\r\n\t\t\t\t\t<p class=\"text-justify\">Pour rejoindre un village et entrer dans l’aventure</p>\r\n\t\t\t\t\t<p class=\"text-center\">\r\n\t\t\t\t\t\t<img th:src=\"@{/images/c0.png}\" width=\"25%\" alt=\"\">\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t<h1 class=\"display-6\">Classement des Falna</h1>\r\n\t\t\t\t\t<a href=\"#\">Hebdomadaire</a> / <a href=\"#\">Mensuel</a> / <a href=\"#\">Annuel</a>\r\n\t\t\t\t\t<p class=\"text-center\">\r\n\t\t\t\t\t\t<img th:src=\"@{/images/c1.png}\" width=\"75%\" alt=\"\">\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<h1 class=\"display-6\">Classement des Équipes</h1>\r\n\t\t\t\t\t<a href=\"#\">Hebdomadaire</a> / <a href=\"#\">Annuel</a> / <a href=\"#\">Éternel</a>\r\n\t\t\t\t\t<p class=\"text-center\">\r\n\t\t\t\t\t\t<img th:src=\"@{/images/c2.png}\" width=\"75%\" alt=\"\">\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-sm-2 borderImage\" style=\"background-image: url(/images/border2.jpg)\"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\r\n\t\t<footer th:insert=\"~{common/footer :: footer}\"></footer>\r\n\r\n\t\t<script th:src=\"@{/webjars/jquery/3.5.1/jquery.min.js}\"></script>\r\n\t\t<script th:src=\"@{/webjars/bootstrap/4.6.2/js/bootstrap.bundle.min.js}\"></script>\r\n\r\n\r\n\r\n\t</body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/target/classes/templates/index.html b/Projet_Danmachi/target/classes/templates/index.html
--- a/Projet_Danmachi/target/classes/templates/index.html	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/target/classes/templates/index.html	(date 1714399724821)
@@ -16,7 +16,7 @@
 			<div class="container h-100">
 				<div class="row h-100 align-items-center">
 					<div class="col-12 text-center">
-						<h1 class="display-2 fw-light">Acceuil</h1>
+						<h1 class="display-2 fw-light">Accueil</h1>
 					</div>
 				</div>
 			</div>
Index: Projet_Danmachi/src/main/java/com/isep/appli/controllers/UserController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.isep.appli.controllers;\r\n\r\nimport com.isep.appli.models.Message;\r\nimport com.isep.appli.models.Persona;\r\nimport com.isep.appli.services.PersonaService;\r\nimport com.isep.appli.services.EmailService;\r\nimport jakarta.servlet.http.HttpSession;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.validation.BindingResult;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.multipart.MultipartFile;\r\nimport org.springframework.web.servlet.ModelAndView;\r\n\r\nimport com.isep.appli.models.User;\r\nimport com.isep.appli.services.UserService;\r\n\r\nimport jakarta.validation.Valid;\r\n\r\nimport java.util.List;\r\n\r\n@Controller\r\npublic class UserController {\r\n\t\r\n\tprivate final UserService userService;\r\n\tprivate final EmailService emailService;\r\n\tprivate final PersonaService personaService;\r\n\r\n\tUserController(UserService userService, EmailService emailService, PersonaService personaService) {\r\n\t\tthis.userService = userService;\r\n\t\tthis.emailService = emailService;\r\n\t\tthis.personaService = personaService;\r\n\t}\r\n\t\r\n\t/*******************************************************************************/\r\n\t/******************************** ALL ******************************************/\r\n\t/*******************************************************************************/\r\n\t@GetMapping(\"/home\")\r\n\tpublic ModelAndView home() {\r\n\t\tModelAndView modelAndView = new ModelAndView(\"index\");\r\n\t\treturn modelAndView;\r\n\t}\r\n\t\r\n\t@GetMapping(\"/\")\r\n\tpublic String index() {\r\n\t\treturn \"redirect:/home\";\r\n\t}\r\n\r\n\t/*******************************************************************************/\r\n\t/******************************** GUEST ****************************************/\r\n\t/*******************************************************************************/\r\n\t\r\n\t\r\n\t@GetMapping(\"/subscription\") \r\n\tpublic String subscriptionPage(Model model) {\r\n\t\tmodel.addAttribute(\"user\", new User());\r\n\t\treturn \"subscription\";\r\n\t}\r\n\t\r\n\t@PostMapping(\"/subscription\") \r\n\t\tpublic String subscription(@Valid User user, BindingResult result, Model model) {\r\n\t\tuserService.signup(user);\r\n\r\n\t\tString confirmationUrl = \"http://localhost:8080/confirm?id=\" + user.getId();\r\n\t\tString emailContent = \"Please click the following link to confirm your email address: \" + confirmationUrl;\r\n\r\n\t\temailService.sendEmail(user.getEmail(), emailContent, \"Confirmer adresse mail\");\r\n\r\n\t\treturn \"redirect:/login\";\r\n\t}\r\n\r\n\t@GetMapping(\"/confirm\")\r\n\tpublic String confirmEmail(@RequestParam(\"id\") long id) {\r\n\t\tuserService.confirmEmail(id);\r\n\t\treturn \"redirect:/login\";\r\n\t}\r\n\r\n\t@PostMapping(\"/checkUnique\")\r\n\tpublic ResponseEntity<Boolean> checkUnique(@RequestBody String email) {\r\n\t\treturn ResponseEntity.ok(userService.checkUnique(email));\r\n\t}\r\n\t\r\n\t@GetMapping(\"/login\") \r\n\tpublic String loginPage(Model model) {\r\n\t\tmodel.addAttribute(\"user\", new User());\r\n\t\treturn \"login\";\r\n\t}\r\n\t\r\n\t@PostMapping(\"/login\") \r\n\tpublic String checkLogin(@Valid User user, BindingResult result, Model model, HttpSession session) {\r\n\t\tUser userSignedIn = userService.login(user.getEmail(), user.getPassword());\r\n\r\n\t\tif (userSignedIn == null) {\r\n\t\t\tmodel.addAttribute(\"loginError\", true);\r\n\t\t\treturn \"/login\";\r\n\t\t}\r\n\t\tsession.setAttribute(\"user\", userSignedIn);\r\n\r\n\t\treturn \"redirect:/user-profile\";\r\n\t}\r\n\t\r\n\t\r\n\t/*******************************************************************************/\r\n\t/******************************** PLAYER ***************************************/\r\n\t/*******************************************************************************/\r\n\r\n\t@GetMapping(\"/user-profile\")\r\n\tpublic String checkLogin(Model model, HttpSession session) {\r\n\r\n\t\tUser user = (User) session.getAttribute(\"user\");\r\n\t\tList<Persona> personas = personaService.getPersonasByUser(user);\r\n\r\n\t\tmodel.addAttribute(\"user\", user);\r\n\t\tmodel.addAttribute(\"personas\", personas);\r\n\t\tmodel.addAttribute(\"persona\", new Persona());\r\n\t\treturn \"user-profile\";\r\n\t}\r\n\r\n\t@PostMapping(\"/save-persona\")\r\n\tpublic String savePersonaToUser(@Valid Persona persona,\r\n\t\t\t\t\t\t\t\t\t@RequestParam(\"file\") MultipartFile file,\r\n\t\t\t\t\t\t\t\t\tHttpSession session,\r\n\t\t\t\t\t\t\t\t\tModel model) {\r\n\t\tUser user = (User) session.getAttribute(\"user\");\r\n\r\n\t\tif (personaService.savePersona(file, user, persona)) {\r\n\t\t\treturn \"redirect:/user-profile\";\r\n\t\t}\r\n\r\n\t\tmodel.addAttribute(\"createPersonaError\", true);\r\n\t\treturn \"user-profile\";\r\n\t}\r\n\r\n\t@GetMapping(\"/chatPage\")\r\n\tpublic String chatPage() {\r\n\t\treturn \"chatPage\";\r\n\t}\r\n\r\n\t@GetMapping(\"/sendMessage\")\r\n\tpublic String sendMessage(@Valid Message message) {\r\n\r\n\t\treturn \"chatPage\";\r\n\t}\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/src/main/java/com/isep/appli/controllers/UserController.java b/Projet_Danmachi/src/main/java/com/isep/appli/controllers/UserController.java
--- a/Projet_Danmachi/src/main/java/com/isep/appli/controllers/UserController.java	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/src/main/java/com/isep/appli/controllers/UserController.java	(date 1714400775026)
@@ -1,23 +1,17 @@
 package com.isep.appli.controllers;
 
 import com.isep.appli.models.Message;
-import com.isep.appli.models.Persona;
-import com.isep.appli.services.PersonaService;
-import com.isep.appli.services.EmailService;
+import com.isep.appli.models.Personnage;
+import com.isep.appli.services.PersonnageService;
 import jakarta.servlet.http.HttpSession;
+import org.springframework.http.HttpStatus;
 import org.springframework.http.ResponseEntity;
 import org.springframework.stereotype.Controller;
 import org.springframework.ui.Model;
-import org.springframework.validation.BindingResult;
-import org.springframework.web.bind.annotation.GetMapping;
-import org.springframework.web.bind.annotation.PostMapping;
-import org.springframework.web.bind.annotation.RequestBody;
-import org.springframework.web.bind.annotation.RequestParam;
+import org.springframework.web.bind.annotation.*;
 import org.springframework.web.multipart.MultipartFile;
-import org.springframework.web.servlet.ModelAndView;
 
 import com.isep.appli.models.User;
-import com.isep.appli.services.UserService;
 
 import jakarta.validation.Valid;
 
@@ -25,109 +19,33 @@
 
 @Controller
 public class UserController {
-	
-	private final UserService userService;
-	private final EmailService emailService;
-	private final PersonaService personaService;
+	private final PersonnageService personnageService;
 
-	UserController(UserService userService, EmailService emailService, PersonaService personaService) {
-		this.userService = userService;
-		this.emailService = emailService;
-		this.personaService = personaService;
-	}
-	
-	/*******************************************************************************/
-	/******************************** ALL ******************************************/
-	/*******************************************************************************/
-	@GetMapping("/home")
-	public ModelAndView home() {
-		ModelAndView modelAndView = new ModelAndView("index");
-		return modelAndView;
-	}
-	
-	@GetMapping("/")
-	public String index() {
-		return "redirect:/home";
-	}
-
-	/*******************************************************************************/
-	/******************************** GUEST ****************************************/
-	/*******************************************************************************/
-	
-	
-	@GetMapping("/subscription") 
-	public String subscriptionPage(Model model) {
-		model.addAttribute("user", new User());
-		return "subscription";
+	UserController(PersonnageService personnageService) {
+		this.personnageService = personnageService;
 	}
-	
-	@PostMapping("/subscription") 
-		public String subscription(@Valid User user, BindingResult result, Model model) {
-		userService.signup(user);
-
-		String confirmationUrl = "http://localhost:8080/confirm?id=" + user.getId();
-		String emailContent = "Please click the following link to confirm your email address: " + confirmationUrl;
-
-		emailService.sendEmail(user.getEmail(), emailContent, "Confirmer adresse mail");
-
-		return "redirect:/login";
-	}
-
-	@GetMapping("/confirm")
-	public String confirmEmail(@RequestParam("id") long id) {
-		userService.confirmEmail(id);
-		return "redirect:/login";
-	}
-
-	@PostMapping("/checkUnique")
-	public ResponseEntity<Boolean> checkUnique(@RequestBody String email) {
-		return ResponseEntity.ok(userService.checkUnique(email));
-	}
-	
-	@GetMapping("/login") 
-	public String loginPage(Model model) {
-		model.addAttribute("user", new User());
-		return "login";
-	}
-	
-	@PostMapping("/login") 
-	public String checkLogin(@Valid User user, BindingResult result, Model model, HttpSession session) {
-		User userSignedIn = userService.login(user.getEmail(), user.getPassword());
-
-		if (userSignedIn == null) {
-			model.addAttribute("loginError", true);
-			return "/login";
-		}
-		session.setAttribute("user", userSignedIn);
-
-		return "redirect:/user-profile";
-	}
-	
-	
-	/*******************************************************************************/
-	/******************************** PLAYER ***************************************/
-	/*******************************************************************************/
 
 	@GetMapping("/user-profile")
 	public String checkLogin(Model model, HttpSession session) {
 
 		User user = (User) session.getAttribute("user");
-		List<Persona> personas = personaService.getPersonasByUser(user);
+		List<Personnage> personnages = personnageService.getPersonasByUser(user);
 
 		model.addAttribute("user", user);
-		model.addAttribute("personas", personas);
-		model.addAttribute("persona", new Persona());
+		model.addAttribute("personnages", personnages);
+		model.addAttribute("newPersonnage", new Personnage());
 		return "user-profile";
 	}
 
-	@PostMapping("/save-persona")
-	public String savePersonaToUser(@Valid Persona persona,
+	@PostMapping("/save-personnage")
+	public String savePersonaToUser(@Valid Personnage personnage,
 									@RequestParam("file") MultipartFile file,
 									HttpSession session,
-									Model model) {
+									Model model)
+	{
 		User user = (User) session.getAttribute("user");
 
-		if (personaService.savePersona(file, user, persona)) {
+		if (personnageService.savePersona(file, user, personnage)) {
 			return "redirect:/user-profile";
 		}
 
@@ -135,6 +53,22 @@
 		return "user-profile";
 	}
 
+	@GetMapping("/personnage/{id}")
+	public ResponseEntity<Personnage> getPersonnageById(@PathVariable long id) {
+		Personnage currentPersonnage = personnageService.getPersonnageById(id);
+		return ResponseEntity.ok(currentPersonnage);
+	}
+
+	@DeleteMapping("/personnage/{id}")
+	public ResponseEntity<String> deletePersonnageById(@PathVariable long id) {
+		try {
+			personnageService.deletePersonnageById(id);
+			return ResponseEntity.ok("Personnage bien suprimer");
+		} catch (Exception e) {
+			return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body("Error deleting personnage");
+		}
+	}
+	
 	@GetMapping("/chatPage")
 	public String chatPage() {
 		return "chatPage";
Index: Projet_Danmachi/src/main/java/com/isep/appli/services/PersonaService.java
===================================================================
diff --git a/Projet_Danmachi/src/main/java/com/isep/appli/services/PersonaService.java b/Projet_Danmachi/src/main/java/com/isep/appli/services/PersonaService.java
deleted file mode 100644
--- a/Projet_Danmachi/src/main/java/com/isep/appli/services/PersonaService.java	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ /dev/null	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
@@ -1,47 +0,0 @@
-package com.isep.appli.services;
-
-import com.isep.appli.models.Persona;
-import com.isep.appli.models.User;
-import com.isep.appli.repositories.PersonaRepository;
-import org.springframework.stereotype.Service;
-import org.springframework.util.StringUtils;
-import org.springframework.web.multipart.MultipartFile;
-
-import java.io.IOException;
-import java.util.Base64;
-import java.util.List;
-
-@Service
-public class PersonaService {
-    private final PersonaRepository personaRepository;
-    private final int baseLevel = 1;
-    private final int baseMoney = 15000;
-
-    PersonaService(PersonaRepository personaRepository) {
-        this.personaRepository = personaRepository;
-    }
-
-    public List<Persona> getPersonasByUser(User user) {
-        return personaRepository.findPersonasByUser(user);
-    }
-
-    public boolean savePersona(MultipartFile file, User user, Persona persona) {
-
-        persona.setUser(user);
-        persona.setLevel(baseLevel);
-        persona.setMoney(baseMoney);
-
-        String fileName = StringUtils.cleanPath(file.getOriginalFilename());
-        if(fileName.contains("..")) {
-            return false;
-        }
-        try {
-            persona.setImage(Base64.getEncoder().encodeToString(file.getBytes()));
-        } catch (IOException e) {
-            throw new RuntimeException(e);
-        }
-
-        personaRepository.save(persona);
-        return true;
-    }
-}
Index: Projet_Danmachi/target/classes/META-INF/maven/com.isep/Projet_Danmachi/pom.properties
===================================================================
diff --git a/Projet_Danmachi/target/classes/META-INF/maven/com.isep/Projet_Danmachi/pom.properties b/Projet_Danmachi/target/classes/META-INF/maven/com.isep/Projet_Danmachi/pom.properties
deleted file mode 100644
--- a/Projet_Danmachi/target/classes/META-INF/maven/com.isep/Projet_Danmachi/pom.properties	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ /dev/null	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
@@ -1,7 +0,0 @@
-#Generated by Maven Integration for Eclipse
-#Mon Apr 22 14:48:14 CEST 2024
-artifactId=Projet_Danmachi
-groupId=com.isep
-m2e.projectLocation=C\:\\Users\\charm\\git\\Projet_Danmachi\\Projet_Danmachi
-m2e.projectName=Projet_Danmachi
-version=0.0.1-SNAPSHOT
Index: Projet_Danmachi/target/classes/META-INF/MANIFEST.MF
===================================================================
diff --git a/Projet_Danmachi/target/classes/META-INF/MANIFEST.MF b/Projet_Danmachi/target/classes/META-INF/MANIFEST.MF
deleted file mode 100644
--- a/Projet_Danmachi/target/classes/META-INF/MANIFEST.MF	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ /dev/null	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
@@ -1,6 +0,0 @@
-Manifest-Version: 1.0
-Build-Jdk-Spec: 22
-Implementation-Title: Projet_Danmachi
-Implementation-Version: 0.0.1-SNAPSHOT
-Created-By: Maven Integration for Eclipse
-
Index: Projet_Danmachi/src/main/java/com/isep/appli/repositories/PersonaRepository.java
===================================================================
diff --git a/Projet_Danmachi/src/main/java/com/isep/appli/repositories/PersonaRepository.java b/Projet_Danmachi/src/main/java/com/isep/appli/repositories/PersonaRepository.java
deleted file mode 100644
--- a/Projet_Danmachi/src/main/java/com/isep/appli/repositories/PersonaRepository.java	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ /dev/null	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
@@ -1,13 +0,0 @@
-package com.isep.appli.repositories;
-
-import com.isep.appli.models.Persona;
-import com.isep.appli.models.User;
-import org.springframework.data.jpa.repository.JpaRepository;
-import org.springframework.stereotype.Repository;
-
-import java.util.List;
-
-@Repository
-public interface PersonaRepository extends JpaRepository<Persona, Long> {
-    List<Persona> findPersonasByUser(User user);
-}
Index: Projet_Danmachi/target/classes/META-INF/maven/com.isep/Projet_Danmachi/pom.xml
===================================================================
diff --git a/Projet_Danmachi/target/classes/META-INF/maven/com.isep/Projet_Danmachi/pom.xml b/Projet_Danmachi/target/classes/META-INF/maven/com.isep/Projet_Danmachi/pom.xml
deleted file mode 100644
--- a/Projet_Danmachi/target/classes/META-INF/maven/com.isep/Projet_Danmachi/pom.xml	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ /dev/null	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
@@ -1,108 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
-	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
-	<modelVersion>4.0.0</modelVersion>
-	<parent>
-		<groupId>org.springframework.boot</groupId>
-		<artifactId>spring-boot-starter-parent</artifactId>
-		<version>3.2.4</version>
-		<relativePath/> <!-- lookup parent from repository -->
-	</parent>
-	<groupId>com.isep</groupId>
-	<artifactId>Projet_Danmachi</artifactId>
-	<version>0.0.1-SNAPSHOT</version>
-	<name>Projet_Danmachi</name>
-	<description>ISEP Projet 2024</description>
-	<properties>
-		<java.version>17</java.version>
-	</properties>
-	<dependencies>
-		<dependency>
-			<groupId>org.springframework.boot</groupId>
-			<artifactId>spring-boot-starter-data-jpa</artifactId>
-		</dependency>
-		<dependency>
-			<groupId>org.springframework.boot</groupId>
-			<artifactId>spring-boot-starter-mail</artifactId>
-		</dependency>
-		<dependency>
-			<groupId>org.springframework.boot</groupId>
-			<artifactId>spring-boot-starter-thymeleaf</artifactId>
-		</dependency>
-		<dependency>
-			<groupId>org.springframework.boot</groupId>
-			<artifactId>spring-boot-starter-validation</artifactId>
-		</dependency>
-		<dependency>
-			<groupId>org.springframework.boot</groupId>
-			<artifactId>spring-boot-starter-web</artifactId>
-		</dependency>
-
-		<dependency>
-			<groupId>org.springframework.boot</groupId>
-			<artifactId>spring-boot-devtools</artifactId>
-			<scope>runtime</scope>
-			<optional>true</optional>
-		</dependency>
-		<dependency>
-			<groupId>org.projectlombok</groupId>
-			<artifactId>lombok</artifactId>
-			<optional>true</optional>
-		</dependency>
-		<dependency>
-			<groupId>org.springframework.boot</groupId>
-			<artifactId>spring-boot-starter-test</artifactId>
-			<scope>test</scope>
-		</dependency>
-		
-		<!-- https://mvnrepository.com/artifact/org.webjars/bootstrap -->
-		<dependency>
-			<groupId>org.webjars</groupId>
-			<artifactId>bootstrap</artifactId>
-			<version>4.6.2</version>
-		</dependency>
-		<!-- https://mvnrepository.com/artifact/org.webjars.npm/bootstrap-icons -->
-		<dependency>
-			<groupId>org.webjars.npm</groupId>
-			<artifactId>bootstrap-icons</artifactId>
-			<version>1.11.3</version>
-		</dependency>
-		<dependency>
-			<groupId>org.springframework.boot</groupId>
-			<artifactId>spring-boot-starter-security</artifactId>
-		</dependency>
-		<dependency>
-			<groupId>org.springframework.security</groupId>
-			<artifactId>spring-security-test</artifactId>
-			<scope>test</scope>
-		</dependency>
-		<dependency>
-			<groupId>org.thymeleaf.extras</groupId>
-			<artifactId>thymeleaf-extras-springsecurity6</artifactId>
-		</dependency>
-		<dependency>
-			<groupId>com.mysql</groupId>
-			<artifactId>mysql-connector-j</artifactId>
-			<scope>runtime</scope>
-		</dependency>
-
-	</dependencies>
-
-	<build>
-		<plugins>
-			<plugin>
-				<groupId>org.springframework.boot</groupId>
-				<artifactId>spring-boot-maven-plugin</artifactId>
-				<configuration>
-					<excludes>
-						<exclude>
-							<groupId>org.projectlombok</groupId>
-							<artifactId>lombok</artifactId>
-						</exclude>
-					</excludes>
-				</configuration>
-			</plugin>
-		</plugins>
-	</build>
-
-</project>
Index: Projet_Danmachi/src/main/java/com/isep/appli/models/Persona.java
===================================================================
diff --git a/Projet_Danmachi/src/main/java/com/isep/appli/models/Persona.java b/Projet_Danmachi/src/main/java/com/isep/appli/models/Persona.java
deleted file mode 100644
--- a/Projet_Danmachi/src/main/java/com/isep/appli/models/Persona.java	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ /dev/null	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
@@ -1,42 +0,0 @@
-package com.isep.appli.models;
-
-import jakarta.persistence.*;
-import lombok.Getter;
-import lombok.Setter;
-
-import java.io.Serializable;
-
-@Getter
-@Setter
-@Entity
-@Table(name = "personnage")
-public class Persona implements Serializable {
-    private static final long serialVersionUID = 1L;
-
-    @Id
-    @GeneratedValue(strategy= GenerationType.AUTO)
-    private Long id;
-
-    @Column(nullable = false)
-    private String firstName;
-
-    @Column(nullable = false)
-    private String lastName;
-
-    @Lob
-    @Column(columnDefinition = "MEDIUMBLOB")
-    private String image;
-
-    @Column(nullable = false)
-    private int level;
-
-    @Column(nullable = false)
-    private Race race;
-
-    @Column(nullable = false)
-    private int money;
-
-    @ManyToOne(fetch = FetchType.LAZY, optional = false)
-    @JoinColumn(name = "user_id", nullable = false)
-    private User user;
-}
Index: Projet_Danmachi/target/classes/templates/user-profile.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE HTML>\r\n<html xmlns:th=\"http://www.thymeleaf.org\">\r\n\t<head>\r\n\t\t<meta charset=\"utf-8\">\r\n\t\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE-edge\">\r\n\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\t\t<link th:rel=\"stylesheet\" th:href=\"@{/webjars/bootstrap/4.6.2/css/bootstrap.min.css}\"/>\r\n\t\t<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css\">\r\n\t\t<link rel=\"stylesheet\" href=\"/css/user-profile.css\"/>\r\n\t</head>\r\n\t<body>\r\n\t\t<div class=\"row\">\r\n\t\t\t<div class=\"container bg-container mt-5 ml-5 py-3 col-md-6\">\r\n\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t<div class=\"col text-left\">\r\n\t\t\t\t\t\t<p class=\"h1 ml-2 mt-3\" th:text=\"'Bonjour '+${user.getFirstName()+' !'}\">Bonjour Prénom</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"col text-right\">\r\n\t\t\t\t\t\t<button class=\"btn btn-grey\" onclick=\"showDiv('user-information')\">\r\n\t\t\t\t\t\t\t<i class=\"bi bi-person-circle\" style=\"font-size: 50px\"></i>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"card-deck mt-3 ml-2\">\r\n\t\t\t\t\t<div th:each=\"persona : ${personas}\" class=\"col-md-6\">\r\n\t\t\t\t\t\t<div class=\"card\" style=\"width: 240px; height: 250px;\">\r\n\t\t\t\t\t\t\t<button onclick=\"showDiv('player-information')\">\r\n\t\t\t\t\t\t\t\t<img th:src=\"'data:image/png;base64,' + ${persona.getImage()}\" class=\"card-img-top\" alt=\"Player Image\">\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<div class=\"card-body\">\r\n\t\t\t\t\t\t\t\t<h5 class=\"card-title\" th:text=\"${persona.getFirstName()} + ' ' + ${persona.getLastName()}\"></h5>\r\n\t\t\t\t\t\t\t\t<p class=\"card-text\" th:text=\"${persona.getRace().getDisplayName()} + ' (lvl ' + ${persona.getLevel()} + ')'\"></p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"col-md-6\">\r\n\t\t\t\t\t\t<div class=\"card\" style=\"width: 240px; height: 250px;\">\r\n\t\t\t\t\t\t\t<div class=\"card-body d-flex align-items-center justify-content-center\">\r\n\t\t\t\t\t\t\t\t<button class=\"btn btn-grey\" onclick=\"showDiv('create-player')\" th:disabled=\"${personas.size() >= 4}\"><i class=\"bi bi-plus\" style=\"font-size: 100px;\"></i></button> <!-- Increase the size of the \"+\" icon -->\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"bg-information col-md-5 over-div px-5\">\r\n\r\n\t\t\t\t<div class=\"div-info py-3\" id=\"user-information\">\r\n\t\t\t\t\t<h1 class=\"text-white\">Information Utilisateur :</h1>\r\n\r\n\t\t\t\t\t<div class=\"my-5 bg-container\">\r\n\t\t\t\t\t\t<label class=\"px-2 pt-3\">Nom :</label>\r\n\t\t\t\t\t\t<span th:text=\"${user.getLastName()}\"></span>\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t<label class=\"px-2\">Prénom :</label>\r\n\t\t\t\t\t\t<span th:text=\"${user.getFirstName()}\"></span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"my-5 bg-container\">\r\n\t\t\t\t\t\t<label class=\"px-2 pt-3\">Email :</label>\r\n\t\t\t\t\t\t<span th:text=\"${user.getEmail()}\"></span>\r\n\t\t\t\t\t\t<i class=\"bi bi-pencil-square\"></i>\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t<label class=\"px-2\">Mot de passe :</label>\r\n\t\t\t\t\t\t<i class=\"bi bi-pencil-square\"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"div-info py-3\" id=\"create-player\" style=\"display:none;\">\r\n\t\t\t\t\t<h1 class=\"text-white mb-5\">Créer nouveau personnage :</h1>\r\n\t\t\t\t\t<form class=\"form-group\" method=\"post\" th:action=\"@{/save-persona}\" th:object=\"${persona}\" enctype=\"multipart/form-data\">\r\n\t\t\t\t\t\t<input class=\"form-control mb-3\" type=\"text\" placeholder=\"Prénom\" th:field=\"*{firstName}\">\r\n\t\t\t\t\t\t<input class=\"form-control mb-3\" type=\"text\" placeholder=\"Nom\" th:field=\"*{lastName}\">\r\n\r\n\t\t\t\t\t\t<div class=\"input-group mb-3\">\r\n\t\t\t\t\t\t\t<div class=\"input-group-prepend\">\r\n\t\t\t\t\t\t\t\t<button class=\"btn btn-outline-light\" type=\"button\" onclick=\"clearSelection()\">x</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<select class=\"form-control mb-3\" id=\"race-select\" th:field=\"*{race}\">\r\n\t\t\t\t\t\t\t\t<option value=\"\" disabled selected>Race</option>\r\n\t\t\t\t\t\t\t\t<option th:each=\"value : ${T(com.isep.appli.models.Race).values()}\" th:value=\"${value}\" th:text=\"${value.getDisplayName()}\"></option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<input class=\"form-control mb-3\" type=\"file\" name=\"file\" placeholder=\"Profil du personnage\">\r\n\r\n\t\t\t\t\t\t<button class=\"btn btn-light btn-outline-success d-block mx-auto\" type=\"submit\">Créer personnage</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t<p class=\"text-danger\" th:if=\"${createPersonaError}\" th:value=\"'Il y a eu une erreur en créant le personnage veuillez reessayer plus tard'\"></p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"div-info py-3\" id=\"player-information\" style=\"display:none;\">\r\n\t\t\t\t\t<h1>Information Personnage :</h1>\r\n\t\t\t\t\t<div class=\"bg-container\">\r\n\t\t\t\t\t\t<label>Nom :</label>\r\n\t\t\t\t\t\t<span>nom personnage</span>\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t<label>Prénom :</label>\r\n\t\t\t\t\t\t<span>prénom personnage</span>\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t<label>Race :</label>\r\n\t\t\t\t\t\t<span>race personnage</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\r\n\t\t<script th:src=\"@{/webjars/bootstrap/4.6.2/js/bootstrap.bundle.min.js}\"></script>\r\n\t\t<script src=\"/js/user-profile.js\"></script>\r\n\t</body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/target/classes/templates/user-profile.html b/Projet_Danmachi/target/classes/templates/user-profile.html
--- a/Projet_Danmachi/target/classes/templates/user-profile.html	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/target/classes/templates/user-profile.html	(date 1714400721599)
@@ -7,8 +7,11 @@
 		<link th:rel="stylesheet" th:href="@{/webjars/bootstrap/4.6.2/css/bootstrap.min.css}"/>
 		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
 		<link rel="stylesheet" href="/css/user-profile.css"/>
+		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
 	</head>
 	<body>
+		<header th:insert="~{common/header :: header}"></header>
+
 		<div class="row">
 			<div class="container bg-container mt-5 ml-5 py-3 col-md-6">
 				<div class="row">
@@ -23,21 +26,21 @@
 				</div>
 
 				<div class="card-deck mt-3 ml-2">
-					<div th:each="persona : ${personas}" class="col-md-6">
-						<div class="card" style="width: 240px; height: 250px;">
-							<button onclick="showDiv('player-information')">
-								<img th:src="'data:image/png;base64,' + ${persona.getImage()}" class="card-img-top" alt="Player Image">
+					<div th:each="personnage : ${personnages}" class="col-md-6">
+						<div class="card">
+							<button onclick="showDiv('player-information', this)" th:id="${personnage.getId()}">
+								<img th:src="'data:image/png;base64,' + ${personnage.getImage()}" class="card-img-top" alt="Player Image">
 							</button>
 							<div class="card-body">
-								<h5 class="card-title" th:text="${persona.getFirstName()} + ' ' + ${persona.getLastName()}"></h5>
-								<p class="card-text" th:text="${persona.getRace().getDisplayName()} + ' (lvl ' + ${persona.getLevel()} + ')'"></p>
+								<h5 class="card-title" th:text="${personnage.getFirstName()} + ' ' + ${personnage.getLastName()}"></h5>
+								<p class="card-text" th:text="${personnage.getRace().getDisplayName()} + ' (lvl ' + ${personnage.getLevel()} + ')'"></p>
 							</div>
 						</div>
 					</div>
-					<div class="col-md-6">
+					<div class="col-md-6" th:if="${personnages.size() < 4}">
 						<div class="card" style="width: 240px; height: 250px;">
 							<div class="card-body d-flex align-items-center justify-content-center">
-								<button class="btn btn-grey" onclick="showDiv('create-player')" th:disabled="${personas.size() >= 4}"><i class="bi bi-plus" style="font-size: 100px;"></i></button> <!-- Increase the size of the "+" icon -->
+								<button class="btn btn-grey" onclick="showDiv('create-player')"><i class="bi bi-plus" style="font-size: 100px;"></i></button> <!-- Increase the size of the "+" icon -->
 							</div>
 						</div>
 					</div>
@@ -56,6 +59,9 @@
 						<br>
 						<label class="px-2">Prénom :</label>
 						<span th:text="${user.getFirstName()}"></span>
+						<br>
+						<label class="px-2">Username :</label>
+						<span th:text="${user.getUsername()}"></span>
 					</div>
 
 					<div class="my-5 bg-container">
@@ -70,7 +76,7 @@
 
 				<div class="div-info py-3" id="create-player" style="display:none;">
 					<h1 class="text-white mb-5">Créer nouveau personnage :</h1>
-					<form class="form-group" method="post" th:action="@{/save-persona}" th:object="${persona}" enctype="multipart/form-data">
+					<form class="form-group" method="post" th:action="@{/save-personnage}" th:object="${newPersonnage}" enctype="multipart/form-data">
 						<input class="form-control mb-3" type="text" placeholder="Prénom" th:field="*{firstName}">
 						<input class="form-control mb-3" type="text" placeholder="Nom" th:field="*{lastName}">
 
@@ -92,22 +98,56 @@
 				</div>
 
 				<div class="div-info py-3" id="player-information" style="display:none;">
-					<h1>Information Personnage :</h1>
-					<div class="bg-container">
+					<h1 class="text-white my-3">Information Personnage :</h1>
+					<div class="container bg-container py-3">
+						<label>Prénom :</label>
+						<span id="info-prenom"></span>
+						<br>
 						<label>Nom :</label>
-						<span>nom personnage</span>
+						<span id="info-nom"></span>
 						<br>
-						<label>Prénom :</label>
-						<span>prénom personnage</span>
-						<br>
-						<label>Race :</label>
-						<span>race personnage</span>
+						<label>Race :</label>
+						<span id="info-race"></span>
+					</div>
+					<div class="bg-container my-4 py-3 row">
+						<div class="col-6">
+							<label>Argent:</label>
+							<span id="info-money"></span>
+							<br>
+							<label>Niveau:</label>
+							<span id="info-level"></span>
+						</div>
+						<div class="col-6">
+							<button class="btn btn-light btn-outline-success btn-lg btn-block">Inventaire</button>
+						</div>
+					</div>
+
+					<div class="row mb-4">
+						<div class="col-6 mb-2">
+							<button class="btn btn-light btn-outline-success btn-lg btn-block">Fiche race</button>
+						</div>
+						<div class="col-6 mb-2">
+							<button class="btn btn-light btn-outline-success btn-lg btn-block">La Guild</button>
+						</div>
+						<div class="col-6">
+							<button class="btn btn-light btn-outline-success btn-lg btn-block">Mini jeu</button>
+						</div>
+						<div class="col-6">
+							<button class="btn btn-light btn-outline-success btn-lg btn-block">Entrer en combat</button>
+						</div>
 					</div>
+
+
+					<button class="btn btn-light btn-outline-danger d-block mx-auto" onclick="deletePersonnage(this)" id="deletePersonnage">Suprimer personnage</button>
+
 				</div>
 
 			</div>
 		</div>
 
+		<div id="alertContainer"></div>
+
+		<footer th:insert="~{common/footer :: footer}"></footer>
 
 		<script th:src="@{/webjars/bootstrap/4.6.2/js/bootstrap.bundle.min.js}"></script>
 		<script src="/js/user-profile.js"></script>
Index: Projet_Danmachi/src/main/resources/templates/user-profile.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE HTML>\r\n<html xmlns:th=\"http://www.thymeleaf.org\">\r\n\t<head>\r\n\t\t<meta charset=\"utf-8\">\r\n\t\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE-edge\">\r\n\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\t\t<link th:rel=\"stylesheet\" th:href=\"@{/webjars/bootstrap/4.6.2/css/bootstrap.min.css}\"/>\r\n\t\t<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css\">\r\n\t\t<link rel=\"stylesheet\" href=\"/css/user-profile.css\"/>\r\n\t</head>\r\n\t<body>\r\n\t\t<div class=\"row\">\r\n\t\t\t<div class=\"container bg-container mt-5 ml-5 py-3 col-md-6\">\r\n\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t<div class=\"col text-left\">\r\n\t\t\t\t\t\t<p class=\"h1 ml-2 mt-3\" th:text=\"'Bonjour '+${user.getFirstName()+' !'}\">Bonjour Prénom</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"col text-right\">\r\n\t\t\t\t\t\t<button class=\"btn btn-grey\" onclick=\"showDiv('user-information')\">\r\n\t\t\t\t\t\t\t<i class=\"bi bi-person-circle\" style=\"font-size: 50px\"></i>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"card-deck mt-3 ml-2\">\r\n\t\t\t\t\t<div th:each=\"persona : ${personas}\" class=\"col-md-6\">\r\n\t\t\t\t\t\t<div class=\"card\" style=\"width: 240px; height: 250px;\">\r\n\t\t\t\t\t\t\t<button onclick=\"showDiv('player-information')\">\r\n\t\t\t\t\t\t\t\t<img th:src=\"'data:image/png;base64,' + ${persona.getImage()}\" class=\"card-img-top\" alt=\"Player Image\">\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<div class=\"card-body\">\r\n\t\t\t\t\t\t\t\t<h5 class=\"card-title\" th:text=\"${persona.getFirstName()} + ' ' + ${persona.getLastName()}\"></h5>\r\n\t\t\t\t\t\t\t\t<p class=\"card-text\" th:text=\"${persona.getRace().getDisplayName()} + ' (lvl ' + ${persona.getLevel()} + ')'\"></p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"col-md-6\">\r\n\t\t\t\t\t\t<div class=\"card\" style=\"width: 240px; height: 250px;\">\r\n\t\t\t\t\t\t\t<div class=\"card-body d-flex align-items-center justify-content-center\">\r\n\t\t\t\t\t\t\t\t<button class=\"btn btn-grey\" onclick=\"showDiv('create-player')\" th:disabled=\"${personas.size() >= 4}\"><i class=\"bi bi-plus\" style=\"font-size: 100px;\"></i></button> <!-- Increase the size of the \"+\" icon -->\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"bg-information col-md-5 over-div px-5\">\r\n\r\n\t\t\t\t<div class=\"div-info py-3\" id=\"user-information\">\r\n\t\t\t\t\t<h1 class=\"text-white\">Information Utilisateur :</h1>\r\n\r\n\t\t\t\t\t<div class=\"my-5 bg-container\">\r\n\t\t\t\t\t\t<label class=\"px-2 pt-3\">Nom :</label>\r\n\t\t\t\t\t\t<span th:text=\"${user.getLastName()}\"></span>\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t<label class=\"px-2\">Prénom :</label>\r\n\t\t\t\t\t\t<span th:text=\"${user.getFirstName()}\"></span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"my-5 bg-container\">\r\n\t\t\t\t\t\t<label class=\"px-2 pt-3\">Email :</label>\r\n\t\t\t\t\t\t<span th:text=\"${user.getEmail()}\"></span>\r\n\t\t\t\t\t\t<i class=\"bi bi-pencil-square\"></i>\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t<label class=\"px-2\">Mot de passe :</label>\r\n\t\t\t\t\t\t<i class=\"bi bi-pencil-square\"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"div-info py-3\" id=\"create-player\" style=\"display:none;\">\r\n\t\t\t\t\t<h1 class=\"text-white mb-5\">Créer nouveau personnage :</h1>\r\n\t\t\t\t\t<form class=\"form-group\" method=\"post\" th:action=\"@{/save-persona}\" th:object=\"${persona}\" enctype=\"multipart/form-data\">\r\n\t\t\t\t\t\t<input class=\"form-control mb-3\" type=\"text\" placeholder=\"Prénom\" th:field=\"*{firstName}\">\r\n\t\t\t\t\t\t<input class=\"form-control mb-3\" type=\"text\" placeholder=\"Nom\" th:field=\"*{lastName}\">\r\n\r\n\t\t\t\t\t\t<div class=\"input-group mb-3\">\r\n\t\t\t\t\t\t\t<div class=\"input-group-prepend\">\r\n\t\t\t\t\t\t\t\t<button class=\"btn btn-outline-light\" type=\"button\" onclick=\"clearSelection()\">x</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<select class=\"form-control mb-3\" id=\"race-select\" th:field=\"*{race}\">\r\n\t\t\t\t\t\t\t\t<option value=\"\" disabled selected>Race</option>\r\n\t\t\t\t\t\t\t\t<option th:each=\"value : ${T(com.isep.appli.models.Race).values()}\" th:value=\"${value}\" th:text=\"${value.getDisplayName()}\"></option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<input class=\"form-control mb-3\" type=\"file\" name=\"file\" placeholder=\"Profil du personnage\">\r\n\r\n\t\t\t\t\t\t<button class=\"btn btn-light btn-outline-success d-block mx-auto\" type=\"submit\">Créer personnage</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t<p class=\"text-danger\" th:if=\"${createPersonaError}\" th:value=\"'Il y a eu une erreur en créant le personnage veuillez reessayer plus tard'\"></p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"div-info py-3\" id=\"player-information\" style=\"display:none;\">\r\n\t\t\t\t\t<h1>Information Personnage :</h1>\r\n\t\t\t\t\t<div class=\"bg-container\">\r\n\t\t\t\t\t\t<label>Nom :</label>\r\n\t\t\t\t\t\t<span>nom personnage</span>\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t<label>Prénom :</label>\r\n\t\t\t\t\t\t<span>prénom personnage</span>\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t<label>Race :</label>\r\n\t\t\t\t\t\t<span>race personnage</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\r\n\t\t<script th:src=\"@{/webjars/bootstrap/4.6.2/js/bootstrap.bundle.min.js}\"></script>\r\n\t\t<script src=\"/js/user-profile.js\"></script>\r\n\t</body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/src/main/resources/templates/user-profile.html b/Projet_Danmachi/src/main/resources/templates/user-profile.html
--- a/Projet_Danmachi/src/main/resources/templates/user-profile.html	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/src/main/resources/templates/user-profile.html	(date 1714400721599)
@@ -7,8 +7,11 @@
 		<link th:rel="stylesheet" th:href="@{/webjars/bootstrap/4.6.2/css/bootstrap.min.css}"/>
 		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
 		<link rel="stylesheet" href="/css/user-profile.css"/>
+		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
 	</head>
 	<body>
+		<header th:insert="~{common/header :: header}"></header>
+
 		<div class="row">
 			<div class="container bg-container mt-5 ml-5 py-3 col-md-6">
 				<div class="row">
@@ -23,21 +26,21 @@
 				</div>
 
 				<div class="card-deck mt-3 ml-2">
-					<div th:each="persona : ${personas}" class="col-md-6">
-						<div class="card" style="width: 240px; height: 250px;">
-							<button onclick="showDiv('player-information')">
-								<img th:src="'data:image/png;base64,' + ${persona.getImage()}" class="card-img-top" alt="Player Image">
+					<div th:each="personnage : ${personnages}" class="col-md-6">
+						<div class="card">
+							<button onclick="showDiv('player-information', this)" th:id="${personnage.getId()}">
+								<img th:src="'data:image/png;base64,' + ${personnage.getImage()}" class="card-img-top" alt="Player Image">
 							</button>
 							<div class="card-body">
-								<h5 class="card-title" th:text="${persona.getFirstName()} + ' ' + ${persona.getLastName()}"></h5>
-								<p class="card-text" th:text="${persona.getRace().getDisplayName()} + ' (lvl ' + ${persona.getLevel()} + ')'"></p>
+								<h5 class="card-title" th:text="${personnage.getFirstName()} + ' ' + ${personnage.getLastName()}"></h5>
+								<p class="card-text" th:text="${personnage.getRace().getDisplayName()} + ' (lvl ' + ${personnage.getLevel()} + ')'"></p>
 							</div>
 						</div>
 					</div>
-					<div class="col-md-6">
+					<div class="col-md-6" th:if="${personnages.size() < 4}">
 						<div class="card" style="width: 240px; height: 250px;">
 							<div class="card-body d-flex align-items-center justify-content-center">
-								<button class="btn btn-grey" onclick="showDiv('create-player')" th:disabled="${personas.size() >= 4}"><i class="bi bi-plus" style="font-size: 100px;"></i></button> <!-- Increase the size of the "+" icon -->
+								<button class="btn btn-grey" onclick="showDiv('create-player')"><i class="bi bi-plus" style="font-size: 100px;"></i></button> <!-- Increase the size of the "+" icon -->
 							</div>
 						</div>
 					</div>
@@ -56,6 +59,9 @@
 						<br>
 						<label class="px-2">Prénom :</label>
 						<span th:text="${user.getFirstName()}"></span>
+						<br>
+						<label class="px-2">Username :</label>
+						<span th:text="${user.getUsername()}"></span>
 					</div>
 
 					<div class="my-5 bg-container">
@@ -70,7 +76,7 @@
 
 				<div class="div-info py-3" id="create-player" style="display:none;">
 					<h1 class="text-white mb-5">Créer nouveau personnage :</h1>
-					<form class="form-group" method="post" th:action="@{/save-persona}" th:object="${persona}" enctype="multipart/form-data">
+					<form class="form-group" method="post" th:action="@{/save-personnage}" th:object="${newPersonnage}" enctype="multipart/form-data">
 						<input class="form-control mb-3" type="text" placeholder="Prénom" th:field="*{firstName}">
 						<input class="form-control mb-3" type="text" placeholder="Nom" th:field="*{lastName}">
 
@@ -92,22 +98,56 @@
 				</div>
 
 				<div class="div-info py-3" id="player-information" style="display:none;">
-					<h1>Information Personnage :</h1>
-					<div class="bg-container">
+					<h1 class="text-white my-3">Information Personnage :</h1>
+					<div class="container bg-container py-3">
+						<label>Prénom :</label>
+						<span id="info-prenom"></span>
+						<br>
 						<label>Nom :</label>
-						<span>nom personnage</span>
+						<span id="info-nom"></span>
 						<br>
-						<label>Prénom :</label>
-						<span>prénom personnage</span>
-						<br>
-						<label>Race :</label>
-						<span>race personnage</span>
+						<label>Race :</label>
+						<span id="info-race"></span>
+					</div>
+					<div class="bg-container my-4 py-3 row">
+						<div class="col-6">
+							<label>Argent:</label>
+							<span id="info-money"></span>
+							<br>
+							<label>Niveau:</label>
+							<span id="info-level"></span>
+						</div>
+						<div class="col-6">
+							<button class="btn btn-light btn-outline-success btn-lg btn-block">Inventaire</button>
+						</div>
+					</div>
+
+					<div class="row mb-4">
+						<div class="col-6 mb-2">
+							<button class="btn btn-light btn-outline-success btn-lg btn-block">Fiche race</button>
+						</div>
+						<div class="col-6 mb-2">
+							<button class="btn btn-light btn-outline-success btn-lg btn-block">La Guild</button>
+						</div>
+						<div class="col-6">
+							<button class="btn btn-light btn-outline-success btn-lg btn-block">Mini jeu</button>
+						</div>
+						<div class="col-6">
+							<button class="btn btn-light btn-outline-success btn-lg btn-block">Entrer en combat</button>
+						</div>
 					</div>
+
+
+					<button class="btn btn-light btn-outline-danger d-block mx-auto" onclick="deletePersonnage(this)" id="deletePersonnage">Suprimer personnage</button>
+
 				</div>
 
 			</div>
 		</div>
 
+		<div id="alertContainer"></div>
+
+		<footer th:insert="~{common/footer :: footer}"></footer>
 
 		<script th:src="@{/webjars/bootstrap/4.6.2/js/bootstrap.bundle.min.js}"></script>
 		<script src="/js/user-profile.js"></script>
Index: Projet_Danmachi/target/classes/static/css/user-profile.css
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>html, body {\r\n    background-color: #D5E4D9;\r\n}\r\n\r\nbody {\r\n    overflow-x: hidden;\r\n}\r\n\r\n.bg-container {\r\n    background: #F6F6F6;\r\n}\r\n\r\n.bg-information {\r\n    background: #67819A;\r\n}\r\n\r\n.over-div {\r\n    margin-top: 10rem;\r\n    left: -3rem;\r\n    bottom: -2rem;\r\n    min-height: 75vh;\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/target/classes/static/css/user-profile.css b/Projet_Danmachi/target/classes/static/css/user-profile.css
--- a/Projet_Danmachi/target/classes/static/css/user-profile.css	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/target/classes/static/css/user-profile.css	(date 1714400721593)
@@ -19,4 +19,8 @@
     left: -3rem;
     bottom: -2rem;
     min-height: 75vh;
+}
+
+label {
+    font-weight: bold;
 }
\ No newline at end of file
Index: Projet_Danmachi/src/main/resources/static/js/user-profile.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>function showDiv(divId) {\r\n    var divsToHide = document.querySelectorAll('.div-info');\r\n    Array.prototype.forEach.call(divsToHide, function(div) {\r\n        div.style.display = 'none';\r\n    });\r\n    var divToShow = document.getElementById(divId);\r\n    divToShow.style.display = 'block';\r\n}\r\n\r\nfunction clearSelection() {\r\n    document.getElementById('race-select').selectedIndex = 0;\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/src/main/resources/static/js/user-profile.js b/Projet_Danmachi/src/main/resources/static/js/user-profile.js
--- a/Projet_Danmachi/src/main/resources/static/js/user-profile.js	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/src/main/resources/static/js/user-profile.js	(date 1714400721596)
@@ -1,12 +1,61 @@
-function showDiv(divId) {
-    var divsToHide = document.querySelectorAll('.div-info');
+function showDiv(divId, button) {
+    const divsToHide = document.querySelectorAll('.div-info');
     Array.prototype.forEach.call(divsToHide, function(div) {
         div.style.display = 'none';
     });
-    var divToShow = document.getElementById(divId);
+
+    const divToShow = document.getElementById(divId);
     divToShow.style.display = 'block';
+
+    if (divId === 'player-information') {
+        const personnageId = button.id;
+
+        $.ajax({
+            type: 'GET',
+            url: '/personnage/' + personnageId,
+            success: function(response) {
+                $('#info-nom').text(response.lastName);
+                $('#info-prenom').text(response.firstName);
+                $('#info-race').text(response.race);
+                $('#info-money').text(response.money);
+                $('#info-level').text(response.level);
+
+                const deleteButton = document.getElementById('deletePersonnage');
+                deleteButton.id = button.id;
+            },
+            error: function(xhr, status, error) {
+                console.error('Error:', error);
+            }
+        });
+    }
 }
+
 
 function clearSelection() {
     document.getElementById('race-select').selectedIndex = 0;
 }
+
+function deletePersonnage(button) {
+    const playerId = button.id;
+
+    $.ajax({
+        type: 'DELETE',
+        url: '/personnage/' + playerId,
+        success: function(response) {
+            location.reload();
+            showBootstrapAlert("success", response);
+        },
+        error: function(xhr, status) {
+            showBootstrapAlert("danger", "Erreur "+ status +": Veuillez réessayer plus tard.")
+        }
+    });
+}
+
+function showBootstrapAlert(type, message) {
+    const alertElement = $('<div class="alert alert-' + type + ' alert-dismissible fade show" role="alert">' +
+        message +
+        '<button type="button" class="close" data-dismiss="alert">&times;</button>' +
+        '</div>');
+
+    $('#alertContainer').append(alertElement);
+}
Index: Projet_Danmachi/src/main/resources/static/js/subscription.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>document.getElementById(\"signup-form\").addEventListener(\"submit\", function(event) {\r\n    event.preventDefault(); // Prevent default form submission\r\n\r\n    const password = document.getElementById(\"password\").value;\r\n    const confirmPassword = document.getElementById(\"confirmPassword\").value;\r\n    const passwordError = document.getElementById(\"passwordError\");\r\n    console.log(password);\r\n\r\n    const email = document.getElementById(\"email\").value;\r\n    const emailError = document.getElementById(\"emailError\");\r\n    console.log(email)\r\n\r\n    const firstName = document.getElementById('firstName').value;\r\n    const firstNameError = document.getElementById(\"firstNameError\");\r\n    console.log(firstName)\r\n\r\n    const lastName = document.getElementById('lastName').value;\r\n    const lastNameError = document.getElementById(\"lastNameError\");\r\n    console.log(lastName)\r\n\r\n    let validationError = false;\r\n\r\n    // Reset error messages\r\n    passwordError.textContent = \"\";\r\n    emailError.textContent = \"\";\r\n    firstNameError.textContent = \"\";\r\n    lastNameError.textContent = \"\";\r\n\r\n    if (password === null || password === \"\") {\r\n        passwordError.textContent = \"Le mot de passe ne peut pas être null\";\r\n        validationError = true;\r\n    } else if (password !== confirmPassword) {\r\n        passwordError.textContent = \"Les mots de passe ne corresponds pas\";\r\n        validationError = true;\r\n    }\r\n\r\n    if (firstName === null || firstName === \"\") {\r\n        firstNameError.textContent = \"Le prénom ne peut pas être null\";\r\n        validationError = true;\r\n    }\r\n\r\n    if (lastName === null || lastName === \"\") {\r\n        lastNameError.textContent = \"Le nom ne peut pas être null\";\r\n        validationError = true;\r\n    }\r\n\r\n    if (email === null || email === \"\") {\r\n        emailError.textContent = \"L'email ne peut pas être null\";\r\n        validationError = true;\r\n    } else if (!validateEmail(email)) {\r\n        emailError.textContent = \"Format email invalid\";\r\n        validationError = true;\r\n    }\r\n\r\n    //if error there don't do any calls to back - don't submit\r\n    if (validationError) { return; }\r\n\r\n    // Check email uniqueness\r\n    $.ajax({\r\n        url: \"/checkUnique\",\r\n        type: \"POST\",\r\n        contentType: \"application/json\",\r\n        data: email,\r\n        success: function(response) {\r\n            if (response) {\r\n                emailError.textContent = \"Email is already registered\";\r\n                return;\r\n            }\r\n            // If all validations pass, submit the form\r\n            document.getElementById(\"signup-form\").submit();\r\n        },\r\n        error: function(xhr, status, error) {\r\n            console.error(\"Error checking uniqueness:\", error);\r\n            // Handle error if needed\r\n        }\r\n    });\r\n\r\n});\r\n\r\nfunction validateEmail(email) {\r\n    var re = /\\S+@\\S+\\.\\S+/;\r\n    return re.test(email);\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/src/main/resources/static/js/subscription.js b/Projet_Danmachi/src/main/resources/static/js/subscription.js
--- a/Projet_Danmachi/src/main/resources/static/js/subscription.js	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/src/main/resources/static/js/subscription.js	(date 1714400721594)
@@ -4,19 +4,18 @@
     const password = document.getElementById("password").value;
     const confirmPassword = document.getElementById("confirmPassword").value;
     const passwordError = document.getElementById("passwordError");
-    console.log(password);
 
     const email = document.getElementById("email").value;
     const emailError = document.getElementById("emailError");
-    console.log(email)
 
     const firstName = document.getElementById('firstName').value;
     const firstNameError = document.getElementById("firstNameError");
-    console.log(firstName)
 
     const lastName = document.getElementById('lastName').value;
     const lastNameError = document.getElementById("lastNameError");
-    console.log(lastName)
+
+    const username = document.getElementById('username').value;
+    const usernameError = document.getElementById('usernameError');
 
     let validationError = false;
 
@@ -25,6 +24,7 @@
     emailError.textContent = "";
     firstNameError.textContent = "";
     lastNameError.textContent = "";
+    usernameError.textContent = "";
 
     if (password === null || password === "") {
         passwordError.textContent = "Le mot de passe ne peut pas être null";
@@ -44,6 +44,11 @@
         validationError = true;
     }
 
+    if (username === null || username === "") {
+        usernameError.textContent = "Le pseudonym ne peut pas être null";
+        validationError = true;
+    }
+
     if (email === null || email === "") {
         emailError.textContent = "L'email ne peut pas être null";
         validationError = true;
@@ -60,13 +65,23 @@
         url: "/checkUnique",
         type: "POST",
         contentType: "application/json",
-        data: email,
+        data: JSON.stringify({"email": email, "username": username}),
         success: function(response) {
-            if (response) {
-                emailError.textContent = "Email is already registered";
-                return;
+            let uniqueError = false;
+            if (response.existingEmail) {
+                emailError.textContent = "Cette adresse mail est déjà utilisée";
+                uniqueError = true;
             }
+
+            if (response.existingUsername) {
+                usernameError.textContent = "Ce pseudonym est déjà utilisé";
+                uniqueError = true;
+            }
+
+            if (uniqueError) {return;}
+
             // If all validations pass, submit the form
+            showBootstrapAlert("success", "Veuillez confirmer votre email en suivant les instructions envoyer.");
             document.getElementById("signup-form").submit();
         },
         error: function(xhr, status, error) {
@@ -80,4 +95,14 @@
 function validateEmail(email) {
     var re = /\S+@\S+\.\S+/;
     return re.test(email);
-}
\ No newline at end of file
+}
+
+function showBootstrapAlert(type, message) {
+    const alertElement = $('<div class="alert alert-' + type + ' alert-dismissible fade show" role="alert">' +
+        message +
+        '<button type="button" class="close" data-dismiss="alert">&times;</button>' +
+        '</div>');
+
+    $('#alertContainer').append(alertElement);
+}
+
Index: Projet_Danmachi/target/classes/templates/common/header.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><header th:fragment=\"header\">\r\n\r\n\r\n\r\n    <!-- https://getbootstrap.com/docs/4.1/components/navbar/? -->\r\n    <nav class=\"navbar navbar-expand-lg navbar-light bg-light shadow\">\r\n        <a class=\"navbar-brand\" href=\"/home\">\r\n            <img th:src=\"@{/images/logo.png}\" width=\"30\" height=\"30\" class=\"d-inline-block align-top\" alt=\"\">\r\n            Danmachi RP\r\n        </a>\r\n        <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n            <span class=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n\r\n        <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n            <ul class=\"navbar-nav mr-auto\">\r\n                <li class=\"nav-item active\">\r\n                    <a class=\"nav-link\" href=\"/home\">Acceuil</a>\r\n                </li>\r\n                <li class=\"nav-item dropdown\">\r\n                    <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                        Guide\r\n                    </a>\r\n                    <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n                        <a class=\"dropdown-item disabled\" href=\"#\">Aventurier</a>\r\n                        <a class=\"dropdown-item disabled\" href=\"#\">Divinité</a>\r\n                        <div class=\"dropdown-divider\"></div>\r\n                        <a class=\"dropdown-item disabled\" href=\"#\">Race</a>\r\n                        <a class=\"dropdown-item disabled\" href=\"#\">Métier</a>\r\n                        <div class=\"dropdown-divider\"></div>\r\n                        <a class=\"dropdown-item disabled\" href=\"#\">Familias</a>\r\n                        <a class=\"dropdown-item disabled\" href=\"#\">Guilde</a>\r\n                        <div class=\"dropdown-divider\"></div>\r\n                        <a class=\"dropdown-item disabled\" href=\"#\">Santé</a>\r\n                        <a class=\"dropdown-item disabled\" href=\"#\">Excelia</a>\r\n                        <a class=\"dropdown-item disabled\" href=\"#\">Réputation</a>\r\n                        <div class=\"dropdown-divider\"></div>\r\n                        <a class=\"dropdown-item disabled\" href=\"#\">Comment se battre</a>\r\n                        <a class=\"dropdown-item disabled\" href=\"#\">Donjon</a>\r\n                        <a class=\"dropdown-item disabled\" href=\"#\">Maître du Jeu</a>\r\n                        <a class=\"dropdown-item disabled\" href=\"#\">Bestiaire</a>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n            <!--<form class=\"form-inline my-2 my-lg-0\">\r\n                <input class=\"form-control mr-sm-2\" type=\"search\" placeholder=\"Search\" aria-label=\"Search\">\r\n                <button class=\"btn btn-outline-success my-2 my-sm-0\" type=\"submit\">Search</button>\r\n            </form>-->\r\n            <ul class=\"navbar-nav\">\r\n                <li class=\"nav-item\">\r\n                    <a class=\"nav-link\" href=\"/login\">Connexion</a>\r\n                </li>\r\n                <li class=\"nav-item\">\r\n                    <a class=\"nav-link\" href=\"/subscription\">Inscription</a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </nav>\r\n\r\n\r\n</header>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/target/classes/templates/common/header.html b/Projet_Danmachi/target/classes/templates/common/header.html
--- a/Projet_Danmachi/target/classes/templates/common/header.html	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/target/classes/templates/common/header.html	(date 1714399724818)
@@ -15,7 +15,7 @@
         <div class="collapse navbar-collapse" id="navbarSupportedContent">
             <ul class="navbar-nav mr-auto">
                 <li class="nav-item active">
-                    <a class="nav-link" href="/home">Acceuil</a>
+                    <a class="nav-link" href="/home">Accueil</a>
                 </li>
                 <li class="nav-item dropdown">
                     <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
@@ -40,6 +40,9 @@
                         <a class="dropdown-item disabled" href="#">Maître du Jeu</a>
                         <a class="dropdown-item disabled" href="#">Bestiaire</a>
                     </div>
+                </li>
+                <li class="nav-item active">
+                    <a class="nav-link" href="/chatPage">Messagerie</a>
                 </li>
             </ul>
             <!--<form class="form-inline my-2 my-lg-0">
Index: Projet_Danmachi/src/main/java/com/isep/appli/services/EmailService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.isep.appli.services;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.mail.SimpleMailMessage;\r\nimport org.springframework.mail.javamail.JavaMailSender;\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\npublic class EmailService {\r\n\r\n    @Autowired\r\n    private JavaMailSender mailSender;\r\n\r\n    public void sendEmail(String toEmail, String body, String subject) {\r\n        SimpleMailMessage message = new SimpleMailMessage();\r\n        message.setFrom(\"donotresponddanmachi@gmail.com\");\r\n        message.setTo(toEmail);\r\n        message.setSubject(subject);\r\n        message.setText(body);\r\n\r\n        mailSender.send(message);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/src/main/java/com/isep/appli/services/EmailService.java b/Projet_Danmachi/src/main/java/com/isep/appli/services/EmailService.java
--- a/Projet_Danmachi/src/main/java/com/isep/appli/services/EmailService.java	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/src/main/java/com/isep/appli/services/EmailService.java	(date 1714400721589)
@@ -1,5 +1,6 @@
 package com.isep.appli.services;
 
+import com.isep.appli.models.User;
 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.mail.SimpleMailMessage;
 import org.springframework.mail.javamail.JavaMailSender;
@@ -11,9 +12,21 @@
     @Autowired
     private JavaMailSender mailSender;
 
+    private final String fromEmail = "donotresponddanmachi@gmail.com";
+    private final String confirmEmailEndpoint = "http://localhost:8080/confirm?id=";
+    private final String confirmEmailSubject = "Confirmer adresse mail";
+    private final String confirmEmailBody = "Please click the following link to confirm your email address: ";
+
+    public void sendConfirmationEmail(User user) {
+        String confirmationUrl = confirmEmailEndpoint + user.getId();
+        String emailContent = confirmEmailBody + confirmationUrl;
+
+        sendEmail(user.getEmail(), emailContent, confirmEmailSubject);
+    }
+
     public void sendEmail(String toEmail, String body, String subject) {
         SimpleMailMessage message = new SimpleMailMessage();
-        message.setFrom("donotresponddanmachi@gmail.com");
+        message.setFrom(fromEmail);
         message.setTo(toEmail);
         message.setSubject(subject);
         message.setText(body);
Index: Projet_Danmachi/target/classes/templates/subscription.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE HTML>\r\n<html xmlns:th=\"http://www.thymeleaf.org\">\r\n\t<head>\r\n\t\t<meta charset=\"utf-8\">\r\n\t\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE-edge\">\r\n\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\t\t<link th:rel=\"stylesheet\" th:href=\"@{/webjars/bootstrap/4.6.2/css/bootstrap.min.css}\"/>\r\n\t\t<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css\">\r\n\t\t<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js\"></script>\r\n\t</head>\r\n\t<body>\r\n\t\t\r\n\r\n\t\r\n\t\t<div class=\"container\">\r\n\t\t\t<h1>Subscription</h1>\r\n\t\t\t\r\n\t\t\t<form id=\"signup-form\" th:action=\"@{/subscription}\" th:object=\"${user}\" method=\"POST\">\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\r\n\t\t\t\t\t<label for=\"firstName\">firstName</label>\r\n\t\t\t\t\t<input class=\"form-control\" type=\"text\" th:field=\"*{firstName}\"  id=\"firstName\" placeholder=\"Prénom\">\r\n\t\t\t\t\t<p id=\"firstNameError\" class=\"text-danger\"></p>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<label for=\"lastName\">lastName</label>\r\n\t\t\t\t\t<input class=\"form-control\" type=\"text\" th:field=\"*{lastName}\"  id=\"lastName\" placeholder=\"Nom\">\r\n\t\t\t\t\t<p id=\"lastNameError\" class=\"text-danger\"></p>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<label for=\"email\">mail</label>\r\n\t\t\t\t\t<input class=\"form-control\" type=\"text\" th:field=\"*{email}\"  id=\"email\" placeholder=\"Adresse mail\">\r\n\t\t\t\t\t<p id=\"emailError\" class=\"text-danger\"></p>\r\n\r\n\t\t\t\t\t<label for=\"password\">password</label>\r\n\t\t\t\t\t<input type=\"password\" class=\"form-control\" th:field=\"*{password}\" placeholder=\"Mot de passe\" id=\"password\">\r\n\t\t\t\t\t<input type=\"password\" class=\"form-control\" placeholder=\"Confirmer mot de passe\" id=\"confirmPassword\">\r\n\t\t\t\t\t<p id=\"passwordError\" class=\"text-danger\"></p>\r\n\r\n\t\t\t\t\t<button type=\"submit\" class=\"btn btn-outline-success\"></i>Subscription</button>\r\n\t\t\t\t\t<p><a class=\"text-black\" href=\"/login\">Déjà un compte ?</a></p>\r\n\t\t\t\t\t<a class=\"btn\" href=\"/home\"> Back</a>\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\r\n\t\t</div>\r\n\r\n\r\n\r\n\r\n\t\t<script th:src=\"@{/webjars/bootstrap/4.6.2/js/bootstrap.bundle.min.js}\"></script>\r\n\t\t<script src=\"/js/subscription.js\"></script>\r\n\t</body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/target/classes/templates/subscription.html b/Projet_Danmachi/target/classes/templates/subscription.html
--- a/Projet_Danmachi/target/classes/templates/subscription.html	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/target/classes/templates/subscription.html	(date 1714400721597)
@@ -25,6 +25,10 @@
 					<label for="lastName">lastName</label>
 					<input class="form-control" type="text" th:field="*{lastName}"  id="lastName" placeholder="Nom">
 					<p id="lastNameError" class="text-danger"></p>
+
+					<label for="username">Pseudonym</label>
+					<input class="form-control" type="text" th:field="*{username}"  id="username" placeholder="Pseudonym">
+					<p id="usernameError" class="text-danger"></p>
 					
 					<label for="email">mail</label>
 					<input class="form-control" type="text" th:field="*{email}"  id="email" placeholder="Adresse mail">
@@ -46,8 +50,7 @@
 
 		</div>
 
-
-
+		<div id="alertContainer"></div>
 
 		<script th:src="@{/webjars/bootstrap/4.6.2/js/bootstrap.bundle.min.js}"></script>
 		<script src="/js/subscription.js"></script>
Index: Projet_Danmachi/src/main/java/com/isep/appli/services/UserService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.isep.appli.services;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Optional;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport com.isep.appli.models.User;\r\nimport com.isep.appli.repositories.UserRepository;\r\n\r\n\r\n@Service\r\npublic class UserService {\r\n\r\n\t@Autowired\r\n\tprivate UserRepository userRepository;\r\n\r\n\t@Autowired\r\n\tprivate PasswordEncoder passwordEncoder;\r\n\r\n\tpublic String signup(User user) {\r\n\t\tString encodedPassword = passwordEncoder.encode(user.getPassword());\r\n\t\tuser.setPassword(encodedPassword);\r\n\t\tuser.setEnabled(false);\r\n\t\tuser.setIsAdmin(false);\r\n\t\tuserRepository.save(user);\r\n\r\n\t\treturn \"signup\";\r\n\t}\r\n\r\n\tpublic boolean checkUnique(String email) {\r\n\t\treturn userRepository.findUserByEmail(email) != null;\r\n\t}\r\n\r\n\tpublic boolean confirmEmail(long userId) {\r\n\t\tUser user = userRepository.findById(userId).orElse(null);\r\n\t\tif (user != null) {\r\n\t\t\tuser.setEnabled(true);\r\n\t\t\tuserRepository.save(user);\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic User login(String email, String password) {\r\n\t\tUser user = userRepository.findUserByEmail(email);\r\n\t\tif (user != null && user.getEnabled() == true) {\r\n\t\t\tString hashedPassword = user.getPassword();\r\n\t\t\tif (passwordEncoder.matches(password, hashedPassword)) {\r\n\t\t\t\treturn user;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/src/main/java/com/isep/appli/services/UserService.java b/Projet_Danmachi/src/main/java/com/isep/appli/services/UserService.java
--- a/Projet_Danmachi/src/main/java/com/isep/appli/services/UserService.java	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/src/main/java/com/isep/appli/services/UserService.java	(date 1714400721592)
@@ -32,8 +32,15 @@
 		return "signup";
 	}
 
-	public boolean checkUnique(String email) {
-		return userRepository.findUserByEmail(email) != null;
+	public Map<String, Boolean> checkUnique(Map<String, String> userInfo) {
+		Boolean existingEmail = userRepository.findUserByEmail(userInfo.get("email")) != null;
+		Boolean existingUsername = userRepository.findUserByUsername(userInfo.get("username")) != null;
+
+		Map<String, Boolean> uniqueMap = new HashMap<>();
+		uniqueMap.put("existingEmail", existingEmail);
+		uniqueMap.put("existingUsername", existingUsername);
+
+		return uniqueMap;
 	}
 
 	public boolean confirmEmail(long userId) {
Index: Projet_Danmachi/src/main/resources/static/css/user-profile.css
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>html, body {\r\n    background-color: #D5E4D9;\r\n}\r\n\r\nbody {\r\n    overflow-x: hidden;\r\n}\r\n\r\n.bg-container {\r\n    background: #F6F6F6;\r\n}\r\n\r\n.bg-information {\r\n    background: #67819A;\r\n}\r\n\r\n.over-div {\r\n    margin-top: 10rem;\r\n    left: -3rem;\r\n    bottom: -2rem;\r\n    min-height: 75vh;\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/src/main/resources/static/css/user-profile.css b/Projet_Danmachi/src/main/resources/static/css/user-profile.css
--- a/Projet_Danmachi/src/main/resources/static/css/user-profile.css	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/src/main/resources/static/css/user-profile.css	(date 1714400721593)
@@ -19,4 +19,8 @@
     left: -3rem;
     bottom: -2rem;
     min-height: 75vh;
+}
+
+label {
+    font-weight: bold;
 }
\ No newline at end of file
Index: Projet_Danmachi/src/main/resources/templates/subscription.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE HTML>\r\n<html xmlns:th=\"http://www.thymeleaf.org\">\r\n\t<head>\r\n\t\t<meta charset=\"utf-8\">\r\n\t\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE-edge\">\r\n\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\t\t<link th:rel=\"stylesheet\" th:href=\"@{/webjars/bootstrap/4.6.2/css/bootstrap.min.css}\"/>\r\n\t\t<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css\">\r\n\t\t<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js\"></script>\r\n\t</head>\r\n\t<body>\r\n\t\t\r\n\r\n\t\r\n\t\t<div class=\"container\">\r\n\t\t\t<h1>Subscription</h1>\r\n\t\t\t\r\n\t\t\t<form id=\"signup-form\" th:action=\"@{/subscription}\" th:object=\"${user}\" method=\"POST\">\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\r\n\t\t\t\t\t<label for=\"firstName\">firstName</label>\r\n\t\t\t\t\t<input class=\"form-control\" type=\"text\" th:field=\"*{firstName}\"  id=\"firstName\" placeholder=\"Prénom\">\r\n\t\t\t\t\t<p id=\"firstNameError\" class=\"text-danger\"></p>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<label for=\"lastName\">lastName</label>\r\n\t\t\t\t\t<input class=\"form-control\" type=\"text\" th:field=\"*{lastName}\"  id=\"lastName\" placeholder=\"Nom\">\r\n\t\t\t\t\t<p id=\"lastNameError\" class=\"text-danger\"></p>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<label for=\"email\">mail</label>\r\n\t\t\t\t\t<input class=\"form-control\" type=\"text\" th:field=\"*{email}\"  id=\"email\" placeholder=\"Adresse mail\">\r\n\t\t\t\t\t<p id=\"emailError\" class=\"text-danger\"></p>\r\n\r\n\t\t\t\t\t<label for=\"password\">password</label>\r\n\t\t\t\t\t<input type=\"password\" class=\"form-control\" th:field=\"*{password}\" placeholder=\"Mot de passe\" id=\"password\">\r\n\t\t\t\t\t<input type=\"password\" class=\"form-control\" placeholder=\"Confirmer mot de passe\" id=\"confirmPassword\">\r\n\t\t\t\t\t<p id=\"passwordError\" class=\"text-danger\"></p>\r\n\r\n\t\t\t\t\t<button type=\"submit\" class=\"btn btn-outline-success\"></i>Subscription</button>\r\n\t\t\t\t\t<p><a class=\"text-black\" href=\"/login\">Déjà un compte ?</a></p>\r\n\t\t\t\t\t<a class=\"btn\" href=\"/home\"> Back</a>\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\r\n\t\t</div>\r\n\r\n\r\n\r\n\r\n\t\t<script th:src=\"@{/webjars/bootstrap/4.6.2/js/bootstrap.bundle.min.js}\"></script>\r\n\t\t<script src=\"/js/subscription.js\"></script>\r\n\t</body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/src/main/resources/templates/subscription.html b/Projet_Danmachi/src/main/resources/templates/subscription.html
--- a/Projet_Danmachi/src/main/resources/templates/subscription.html	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/src/main/resources/templates/subscription.html	(date 1714400721597)
@@ -25,6 +25,10 @@
 					<label for="lastName">lastName</label>
 					<input class="form-control" type="text" th:field="*{lastName}"  id="lastName" placeholder="Nom">
 					<p id="lastNameError" class="text-danger"></p>
+
+					<label for="username">Pseudonym</label>
+					<input class="form-control" type="text" th:field="*{username}"  id="username" placeholder="Pseudonym">
+					<p id="usernameError" class="text-danger"></p>
 					
 					<label for="email">mail</label>
 					<input class="form-control" type="text" th:field="*{email}"  id="email" placeholder="Adresse mail">
@@ -46,8 +50,7 @@
 
 		</div>
 
-
-
+		<div id="alertContainer"></div>
 
 		<script th:src="@{/webjars/bootstrap/4.6.2/js/bootstrap.bundle.min.js}"></script>
 		<script src="/js/subscription.js"></script>
Index: Projet_Danmachi/src/main/java/com/isep/appli/repositories/UserRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.isep.appli.repositories;\r\nimport com.isep.appli.models.User;\r\n\r\nimport java.util.List;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n\r\n@Repository\r\npublic interface UserRepository extends JpaRepository<User, Long> {\r\n\r\n\tUser findUserByEmail(String email);\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/src/main/java/com/isep/appli/repositories/UserRepository.java b/Projet_Danmachi/src/main/java/com/isep/appli/repositories/UserRepository.java
--- a/Projet_Danmachi/src/main/java/com/isep/appli/repositories/UserRepository.java	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/src/main/java/com/isep/appli/repositories/UserRepository.java	(date 1714400721588)
@@ -11,4 +11,6 @@
 public interface UserRepository extends JpaRepository<User, Long> {
 
 	User findUserByEmail(String email);
+
+	User findUserByUsername(String username);
 }
Index: Projet_Danmachi/src/main/java/com/isep/appli/models/User.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.isep.appli.models;\r\n\r\nimport java.io.Serializable;\r\n\r\nimport jakarta.persistence.*;\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\n\r\n@Getter\r\n@Setter\r\n@Entity\r\npublic class User implements Serializable {\r\n\t@Id\r\n\t@GeneratedValue(strategy=GenerationType.AUTO)\r\n\tprivate Long id;\r\n\r\n\t@Column(nullable = false)\r\n\tprivate String firstName;\r\n\r\n\t@Column(nullable = false)\r\n\tprivate String lastName;\r\n\r\n\t@Column(unique = true, nullable = false)\r\n\tprivate String email;\r\n\r\n\t@Column(nullable = false)\r\n\tprivate String password;\r\n\r\n\t@Column(columnDefinition=\"tinyint(1) default 0\")\r\n\tprivate Boolean enabled;\r\n\r\n\t@Column(columnDefinition=\"tinyint(1) default 0\")\r\n\tprivate Boolean isAdmin;\r\n\t\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn \"Player [id=\" + id + \", firstName=\" + firstName + \", lastName=\" + lastName + \", email=\" + email\r\n\t\t\t\t+ \", password=\" + password + \", isAdmin=\" + isAdmin + \", enabled=\" + enabled\r\n\t\t\t\t+ \"]\";\r\n\t}\r\n\t\r\n\t\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/src/main/java/com/isep/appli/models/User.java b/Projet_Danmachi/src/main/java/com/isep/appli/models/User.java
--- a/Projet_Danmachi/src/main/java/com/isep/appli/models/User.java	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/src/main/java/com/isep/appli/models/User.java	(date 1714400721586)
@@ -11,7 +11,7 @@
 @Entity
 public class User implements Serializable {
 	@Id
-	@GeneratedValue(strategy=GenerationType.AUTO)
+	@GeneratedValue(strategy=GenerationType.IDENTITY)
 	private Long id;
 
 	@Column(nullable = false)
@@ -20,6 +20,9 @@
 	@Column(nullable = false)
 	private String lastName;
 
+	@Column(unique = true, nullable = false)
+	private String username;
+
 	@Column(unique = true, nullable = false)
 	private String email;
 
Index: Projet_Danmachi/target/classes/static/js/subscription.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>document.getElementById(\"signup-form\").addEventListener(\"submit\", function(event) {\r\n    event.preventDefault(); // Prevent default form submission\r\n\r\n    const password = document.getElementById(\"password\").value;\r\n    const confirmPassword = document.getElementById(\"confirmPassword\").value;\r\n    const passwordError = document.getElementById(\"passwordError\");\r\n    console.log(password);\r\n\r\n    const email = document.getElementById(\"email\").value;\r\n    const emailError = document.getElementById(\"emailError\");\r\n    console.log(email)\r\n\r\n    const firstName = document.getElementById('firstName').value;\r\n    const firstNameError = document.getElementById(\"firstNameError\");\r\n    console.log(firstName)\r\n\r\n    const lastName = document.getElementById('lastName').value;\r\n    const lastNameError = document.getElementById(\"lastNameError\");\r\n    console.log(lastName)\r\n\r\n    let validationError = false;\r\n\r\n    // Reset error messages\r\n    passwordError.textContent = \"\";\r\n    emailError.textContent = \"\";\r\n    firstNameError.textContent = \"\";\r\n    lastNameError.textContent = \"\";\r\n\r\n    if (password === null || password === \"\") {\r\n        passwordError.textContent = \"Le mot de passe ne peut pas être null\";\r\n        validationError = true;\r\n    } else if (password !== confirmPassword) {\r\n        passwordError.textContent = \"Les mots de passe ne corresponds pas\";\r\n        validationError = true;\r\n    }\r\n\r\n    if (firstName === null || firstName === \"\") {\r\n        firstNameError.textContent = \"Le prénom ne peut pas être null\";\r\n        validationError = true;\r\n    }\r\n\r\n    if (lastName === null || lastName === \"\") {\r\n        lastNameError.textContent = \"Le nom ne peut pas être null\";\r\n        validationError = true;\r\n    }\r\n\r\n    if (email === null || email === \"\") {\r\n        emailError.textContent = \"L'email ne peut pas être null\";\r\n        validationError = true;\r\n    } else if (!validateEmail(email)) {\r\n        emailError.textContent = \"Format email invalid\";\r\n        validationError = true;\r\n    }\r\n\r\n    //if error there don't do any calls to back - don't submit\r\n    if (validationError) { return; }\r\n\r\n    // Check email uniqueness\r\n    $.ajax({\r\n        url: \"/checkUnique\",\r\n        type: \"POST\",\r\n        contentType: \"application/json\",\r\n        data: email,\r\n        success: function(response) {\r\n            if (response) {\r\n                emailError.textContent = \"Email is already registered\";\r\n                return;\r\n            }\r\n            // If all validations pass, submit the form\r\n            document.getElementById(\"signup-form\").submit();\r\n        },\r\n        error: function(xhr, status, error) {\r\n            console.error(\"Error checking uniqueness:\", error);\r\n            // Handle error if needed\r\n        }\r\n    });\r\n\r\n});\r\n\r\nfunction validateEmail(email) {\r\n    var re = /\\S+@\\S+\\.\\S+/;\r\n    return re.test(email);\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/target/classes/static/js/subscription.js b/Projet_Danmachi/target/classes/static/js/subscription.js
--- a/Projet_Danmachi/target/classes/static/js/subscription.js	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/target/classes/static/js/subscription.js	(date 1714400721594)
@@ -4,19 +4,18 @@
     const password = document.getElementById("password").value;
     const confirmPassword = document.getElementById("confirmPassword").value;
     const passwordError = document.getElementById("passwordError");
-    console.log(password);
 
     const email = document.getElementById("email").value;
     const emailError = document.getElementById("emailError");
-    console.log(email)
 
     const firstName = document.getElementById('firstName').value;
     const firstNameError = document.getElementById("firstNameError");
-    console.log(firstName)
 
     const lastName = document.getElementById('lastName').value;
     const lastNameError = document.getElementById("lastNameError");
-    console.log(lastName)
+
+    const username = document.getElementById('username').value;
+    const usernameError = document.getElementById('usernameError');
 
     let validationError = false;
 
@@ -25,6 +24,7 @@
     emailError.textContent = "";
     firstNameError.textContent = "";
     lastNameError.textContent = "";
+    usernameError.textContent = "";
 
     if (password === null || password === "") {
         passwordError.textContent = "Le mot de passe ne peut pas être null";
@@ -44,6 +44,11 @@
         validationError = true;
     }
 
+    if (username === null || username === "") {
+        usernameError.textContent = "Le pseudonym ne peut pas être null";
+        validationError = true;
+    }
+
     if (email === null || email === "") {
         emailError.textContent = "L'email ne peut pas être null";
         validationError = true;
@@ -60,13 +65,23 @@
         url: "/checkUnique",
         type: "POST",
         contentType: "application/json",
-        data: email,
+        data: JSON.stringify({"email": email, "username": username}),
         success: function(response) {
-            if (response) {
-                emailError.textContent = "Email is already registered";
-                return;
+            let uniqueError = false;
+            if (response.existingEmail) {
+                emailError.textContent = "Cette adresse mail est déjà utilisée";
+                uniqueError = true;
             }
+
+            if (response.existingUsername) {
+                usernameError.textContent = "Ce pseudonym est déjà utilisé";
+                uniqueError = true;
+            }
+
+            if (uniqueError) {return;}
+
             // If all validations pass, submit the form
+            showBootstrapAlert("success", "Veuillez confirmer votre email en suivant les instructions envoyer.");
             document.getElementById("signup-form").submit();
         },
         error: function(xhr, status, error) {
@@ -80,4 +95,14 @@
 function validateEmail(email) {
     var re = /\S+@\S+\.\S+/;
     return re.test(email);
-}
\ No newline at end of file
+}
+
+function showBootstrapAlert(type, message) {
+    const alertElement = $('<div class="alert alert-' + type + ' alert-dismissible fade show" role="alert">' +
+        message +
+        '<button type="button" class="close" data-dismiss="alert">&times;</button>' +
+        '</div>');
+
+    $('#alertContainer').append(alertElement);
+}
+
Index: Projet_Danmachi/target/classes/static/js/user-profile.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>function showDiv(divId) {\r\n    var divsToHide = document.querySelectorAll('.div-info');\r\n    Array.prototype.forEach.call(divsToHide, function(div) {\r\n        div.style.display = 'none';\r\n    });\r\n    var divToShow = document.getElementById(divId);\r\n    divToShow.style.display = 'block';\r\n}\r\n\r\nfunction clearSelection() {\r\n    document.getElementById('race-select').selectedIndex = 0;\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Projet_Danmachi/target/classes/static/js/user-profile.js b/Projet_Danmachi/target/classes/static/js/user-profile.js
--- a/Projet_Danmachi/target/classes/static/js/user-profile.js	(revision 1c8147de7573f9949e7acb93e87b055952b2b7c9)
+++ b/Projet_Danmachi/target/classes/static/js/user-profile.js	(date 1714400721596)
@@ -1,12 +1,61 @@
-function showDiv(divId) {
-    var divsToHide = document.querySelectorAll('.div-info');
+function showDiv(divId, button) {
+    const divsToHide = document.querySelectorAll('.div-info');
     Array.prototype.forEach.call(divsToHide, function(div) {
         div.style.display = 'none';
     });
-    var divToShow = document.getElementById(divId);
+
+    const divToShow = document.getElementById(divId);
     divToShow.style.display = 'block';
+
+    if (divId === 'player-information') {
+        const personnageId = button.id;
+
+        $.ajax({
+            type: 'GET',
+            url: '/personnage/' + personnageId,
+            success: function(response) {
+                $('#info-nom').text(response.lastName);
+                $('#info-prenom').text(response.firstName);
+                $('#info-race').text(response.race);
+                $('#info-money').text(response.money);
+                $('#info-level').text(response.level);
+
+                const deleteButton = document.getElementById('deletePersonnage');
+                deleteButton.id = button.id;
+            },
+            error: function(xhr, status, error) {
+                console.error('Error:', error);
+            }
+        });
+    }
 }
+
 
 function clearSelection() {
     document.getElementById('race-select').selectedIndex = 0;
 }
+
+function deletePersonnage(button) {
+    const playerId = button.id;
+
+    $.ajax({
+        type: 'DELETE',
+        url: '/personnage/' + playerId,
+        success: function(response) {
+            location.reload();
+            showBootstrapAlert("success", response);
+        },
+        error: function(xhr, status) {
+            showBootstrapAlert("danger", "Erreur "+ status +": Veuillez réessayer plus tard.")
+        }
+    });
+}
+
+function showBootstrapAlert(type, message) {
+    const alertElement = $('<div class="alert alert-' + type + ' alert-dismissible fade show" role="alert">' +
+        message +
+        '<button type="button" class="close" data-dismiss="alert">&times;</button>' +
+        '</div>');
+
+    $('#alertContainer').append(alertElement);
+}
