<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE-edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link th:rel="stylesheet" th:href="@{/webjars/bootstrap/4.6.2/css/bootstrap.min.css}"/>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
		<link rel="stylesheet" href="/css/user-profile.css"/>
	</head>
	<body>
		<div class="row">
			<div class="container bg-container mt-5 ml-5 py-3 col-md-6">
				<div class="row">
					<div class="col text-left">
						<p class="h1 ml-2 mt-3" th:text="'Bonjour '+${user.getFirstName()+' !'}">Bonjour Prénom</p>
					</div>
					<div class="col text-right">
						<button class="btn btn-grey" onclick="showDiv('user-information')">
							<i class="bi bi-person-circle" style="font-size: 50px"></i>
						</button>
					</div>
				</div>

				<div class="card-deck mt-3 ml-5">
					<div th:each="persona : ${personas}" class="col-md-6">
						<div class="card" style="width: 240px; height: 250px;">
							<button onclick="showDiv('player-information')">
								<img th:src="'data:image/png;base64,' + ${persona.getImage()}" class="card-img-top" alt="Player Image">
							</button>
							<div class="card-body">
								<h5 class="card-title" th:text="${persona.getFirstName()} + ' ' + ${persona.getLastName()}"></h5>
								<p class="card-text" th:text="${persona.getRace().getDisplayName()} + '(lvl ' + ${persona.getLevel()} + ')'"></p>
							</div>
						</div>
					</div>
					<div class="col-md-6">
						<div class="card" style="width: 240px; height: 250px;">
							<div class="card-body d-flex align-items-center justify-content-center">
								<button class="btn btn-grey" onclick="showDiv('create-player')" th:disabled="${personas.size() >= 4}"><i class="bi bi-plus" style="font-size: 100px;"></i></button> <!-- Increase the size of the "+" icon -->
							</div>
						</div>
					</div>
				</div>

			</div>

			<div class="bg-information col-md-5 over-div px-5">

				<div class="div-info py-3" id="user-information">
					<h1 class="text-white">Information Utilisateur :</h1>

					<div class="my-5 bg-container">
						<label class="px-2 pt-3">Nom :</label>
						<span th:text="${user.getLastName()}"></span>
						<br>
						<label class="px-2">Prénom :</label>
						<span th:text="${user.getFirstName()}"></span>
					</div>

					<div class="my-5 bg-container">
						<label class="px-2 pt-3">Email :</label>
						<span th:text="${user.getEmail()}"></span>
						<i class="bi bi-pencil-square"></i>
						<br>
						<label class="px-2">Mot de passe :</label>
						<i class="bi bi-pencil-square"></i>
					</div>
				</div>

				<div class="div-info py-3" id="create-player" style="display:none;">
					<h1 class="text-white mb-5">Créer nouveau personnage :</h1>
					<form class="form-group" method="post" th:action="@{/save-persona}" th:object="${persona}" enctype="multipart/form-data">
						<input class="form-control mb-3" type="text" placeholder="Prénom" th:field="*{firstName}">
						<input class="form-control mb-3" type="text" placeholder="Nom" th:field="*{lastName}">

						<div class="input-group mb-3">
							<div class="input-group-prepend">
								<button class="btn btn-outline-light" type="button" onclick="clearSelection()">x</button>
							</div>
							<select class="form-control mb-3" id="race-select" th:field="*{race}">
								<option value="" disabled selected>Race</option>
								<option th:each="value : ${T(com.isep.appli.models.Race).values()}" th:value="${value}" th:text="${value.getDisplayName()}"></option>
							</select>
						</div>

						<input class="form-control mb-3" type="file" name="file" placeholder="Profil du personnage">

						<button class="btn btn-light btn-outline-success d-block mx-auto" type="submit">Créer personnage</button>
					</form>
					<p class="text-danger" th:if="${createPersonaError}" th:value="'Il y a eu une erreur en créant le personnage veuillez reessayer plus tard'"></p>
				</div>

				<div class="div-info py-3" id="player-information" style="display:none;">
					<h1>Information Personnage :</h1>
					<div class="bg-container">
						<label>Nom :</label>
						<span>nom personnage</span>
						<br>
						<label>Prénom :</label>
						<span>prénom personnage</span>
						<br>
						<label>Race :</label>
						<span>race personnage</span>
					</div>
				</div>

			</div>
		</div>


		<script> th:src="@{/webjars/bootstrap/4.6.2/css/bootstrap.min.css}"</script>
		<script src="/js/user-profile.js"></script>
	</body>
</html>